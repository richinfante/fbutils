#include "font.h"
#include "draw.h"
#include <stdlib.h>
#include <string.h>

#define X 0xFFFFFF
#define FONT_SIZE 8
#define ALPHA_COUNT 26
#define NUMBERS_COUNT 10
#define ASCIISYMB1_COUNT 16
#define ASCIISYMB2_COUNT 7

const int ALPHA[ALPHA_COUNT][FONT_SIZE][FONT_SIZE] = {
  { 
    {0,0,0,X,X,0,0,0},
    {0,X,X,X,X,X,X,0},
    {0,X,X,0,0,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X} 
  }, {
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,0} 
  }, {
    {0,0,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {0,X,X,X,X,X,X,X},
    {0,0,X,X,X,X,X,X} 
  }, { 
    {X,X,X,X,X,X,0,0},
    {X,X,X,X,X,X,0,0},
    {X,X,0,0,0,X,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,X,X,X},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,0,0}
  }, {
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,0,0},
    {X,X,X,X,X,0,0,0},
    {X,X,X,X,X,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,X}
  }, {
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,0,0},
    {X,X,X,X,X,0,0,0},
    {X,X,X,X,X,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0}
  }, {
    {0,0,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,X,X,X,X},
    {X,X,0,0,X,X,X,X},
    {X,X,0,0,0,0,X,X},
    {0,X,X,X,X,X,X,X},
    {0,0,X,X,X,X,0,0}
  },{
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X}
  },{
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X}
  },{
    {0,0,0,0,0,0,X,X},
    {0,0,0,0,0,0,X,X},
    {0,0,0,0,0,0,X,X},
    {0,0,0,0,0,0,X,X},
    {0,0,0,0,0,0,X,X},
    {X,X,X,0,0,0,X,X},
    {0,X,X,X,X,X,X,X},
    {0,0,X,X,X,X,X,0}
  },{
    {X,X,0,0,0,X,X,X},
    {X,X,0,0,X,X,0,0},
    {X,X,0,X,X,0,0,0},
    {X,X,X,X,0,0,0,0},
    {X,X,X,X,0,0,0,0},
    {X,X,0,X,X,0,0,0},
    {X,X,0,0,X,X,0,0},
    {X,X,0,0,0,X,X,X}
  },{
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X}
  },{
    {X,0,0,0,0,0,0,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,0,0,X,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,0,X,X,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X}
  },{
    {X,0,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,0,0,0,X,X},
    {X,X,X,X,0,0,X,X},
    {X,X,0,X,X,0,X,X},
    {X,X,0,0,X,X,X,X},
    {X,X,0,0,0,X,X,X},
    {X,X,0,0,0,0,X,X}
  },{
    {0,0,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,X,X,X,X,0,0}
  }, {
    {X,X,X,X,X,X,0,0},
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,0,0},
    {X,X,0,0,0,0,0,0},
    {X,X,0,0,0,0,0,0}
  }, {
    {0,0,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,X,0,X,X},
    {X,X,0,0,0,X,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,X,X,X,X,0,X}
  }, {
    {X,X,X,X,X,X,0,0},
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,0,0,0,0},
    {X,X,0,X,X,X,0,0},
    {X,X,0,0,X,X,X,X}
  }, {
    {0,0,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,0},
    {X,X,X,0,0,0,0,0},
    {X,X,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {0,0,0,0,0,0,X,X},
    {0,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,0}
  }, {
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0}
  }, {
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,0,0,X,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,0,X,X,0,0,0}
  }, {
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {0,X,X,0,0,X,X,0},
    {0,X,X,0,0,X,X,0},
    {0,9,X,X,X,X,0,0},
    {0,0,X,X,X,X,0,0},
    {0,0,0,X,X,0,0,0}
  }, {
    {X,0,0,0,0,0,0,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,X,X,0,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,X,0,0,X,X,X},
    {0,X,0,0,0,0,X,0}
  }, {
    {X,X,0,0,0,0,X,X},
    {X,X,X,0,0,X,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,X,X,X,X,0,0},
    {0,0,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {X,X,X,0,0,X,X,X},
    {X,X,0,0,0,0,X,X}
  }, {
    {X,X,0,0,0,0,X,X},
    {X,X,X,0,0,X,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,X,X,X,X,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0}
  }, {
    {X,X,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,X},
    {0,0,0,0,0,X,X,X},
    {0,0,0,X,X,X,0,0},
    {0,X,X,X,0,0,0,0},
    {X,X,X,0,0,0,0,0},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,X}
  }
};

const int NUMBERS[NUMBERS_COUNT][FONT_SIZE][FONT_SIZE] = {
  {
    {0,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,0,X,X,0,X,X},
    {X,X,0,X,X,0,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,0}
  }, {
    {0,0,0,X,X,0,0,0},
    {0,0,X,X,X,0,0,0},
    {0,X,X,X,X,0,0,0},
    {X,X,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {X,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,0}
  }, {
    {0,0,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {0,X,X,0,0,X,X,0},
    {0,0,0,0,X,X,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,X,X,0,0,0,0},
    {0,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X}
  }, {
    {0,0,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {X,X,X,0,0,X,X,X},
    {0,0,0,0,X,X,0,0},
    {0,0,0,0,X,X,0,0},
    {X,X,X,0,0,X,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,X,X,X,X,0,0}
  }, {
    {X,X,0,0,0,X,X,0},
    {X,X,0,0,0,X,X,0},
    {X,X,0,0,0,X,X,0},
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {0,0,0,0,0,X,X,0},
    {0,0,0,0,0,X,X,0},
    {0,0,0,0,0,X,X,0}
  }, {
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,0,0},
    {X,X,X,X,X,0,0,0},
    {0,X,X,X,X,X,X,0},
    {0,0,0,0,0,X,X,X},
    {0,X,X,X,X,X,X,0},
    {X,X,X,X,X,0,0,0}
  }, {
    {0,0,X,X,X,X,0,0},
    {0,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,0,0,0,0,0,0},
    {X,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,0}
  }, {
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {0,0,0,0,0,X,X,0},
    {0,0,0,0,X,X,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,X,X,0,0,0,0},
    {0,X,X,0,0,0,0,0},
    {X,X,0,0,0,0,0,0}
  }, {
    {0,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,X,X},
    {0,X,X,X,X,X,X,0},
    {0,X,X,X,X,X,X,0},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,0}
  }, {
    {0,X,X,X,X,X,X,0},
    {X,X,X,X,X,X,X,X},
    {X,X,0,0,0,0,X,X},
    {X,X,X,X,X,X,X,X},
    {0,X,X,X,X,X,X,X},
    {0,0,0,0,0,0,X,X},
    {0,0,0,0,0,0,X,X},
    {0,0,0,0,0,0,X,X}
  }
};

const int ASCIISYMB1[ASCIISYMB1_COUNT][8][8] = {
  {  
    {0,0,0,0,0,0,0,0},  // SPACE
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0}
  },{
    {0,0,0,X,X,0,0,0},  // EXCLAIMATION
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0}
  }, {  
    {0,0,X,0,X,0,0,0},  // DBL QUOTE
    {0,0,X,0,X,0,0,0},
    {0,0,X,0,X,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0}
  }, {  
    {0,0,X,0,0,0,X,0},  // SHARP
    {0,0,X,0,0,0,X,0},
    {X,X,X,X,X,X,X,X},
    {0,X,0,0,0,X,0,0},
    {0,X,0,0,0,X,0,0},
    {X,X,X,X,X,X,X,X},
    {0,X,0,0,0,X,0,0},
    {0,X,0,0,0,X,0,0}
  }, {
    {0,0,0,0,X,0,0,0},  // DOLLAR
    {0,0,X,X,X,X,X,X},
    {0,X,X,0,X,0,0,0},
    {0,X,X,0,X,0,0,0},
    {0,0,X,X,X,X,X,0},
    {0,0,0,0,X,0,X,X},
    {0,X,X,X,X,X,X,0},
    {0,0,0,0,X,0,0,0}
  },
  {  
    {0,0,0,0,0,0,0,0},  // PERCENT
    {0,X,X,0,0,0,X,0},
    {0,X,X,0,0,X,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,X,0,0,X,X,0},
    {0,X,0,0,0,X,X,0},
    {0,0,0,0,0,0,0,0}
  },
  {  
    {0,0,X,X,0,0,0,0},  // AMP
    {0,X,0,0,X,0,0,0},
    {0,X,0,0,X,0,0,0},
    {0,0,X,X,0,0,0,X},
    {0,0,X,X,X,0,X,0},
    {0,X,0,0,0,X,0,0},
    {0,X,X,0,X,0,X,0},
    {0,0,X,X,0,0,0,X}
  }, {  
    {0,0,0,X,0,0,0,0},  // QUOT
    {0,0,0,X,0,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0}
  }, {  
    {0,0,0,0,0,X,0,0},  // LPAREN
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,0,X,0,0}
  }, {  
    {0,0,X,0,0,0,0,0},  // RPAREN
    {0,0,0,X,0,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,X,0,0,0,0,0}
  }, {
    {X,0,0,X,X,0,0,X},
    {0,X,0,X,X,0,X,0},
    {0,0,X,X,X,X,0,0},
    {X,X,X,X,X,X,X,X},
    {X,X,X,X,X,X,X,X},
    {0,0,X,X,X,X,0,0},
    {0,X,0,X,X,0,X,0},
    {X,0,0,X,X,0,0,X}
  }, {  
    {0,0,0,0,0,0,0,0},  // PLUS
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,X,X,X,X,X,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,0,0,0,0}
  },
  {
    {0,0,0,0,0,0,0,0}, // COMMA
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,X,X,0,0,0,0}
  }, 
  {  
    {0,0,0,0,0,0,0,0},  // MINUS
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,X,X,X,X,X,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0}
  }, {
    {0,0,0,0,0,0,0,0}, // PERIOD
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0}
  },
  {  
    {0,0,0,0,0,0,0,0},  // FSLASH
    {0,0,0,0,0,0,X,0},
    {0,0,0,0,0,X,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,X,0,0,0,0,0},
    {0,X,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0}
  }  
};

const int ASCIISYMB2[ASCIISYMB2_COUNT][8][8] = {
  {
    {0,0,0,0,0,0,0,0},  // COLON
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,0,0,0,0,0}
  },{
    {0,0,0,0,0,0,0,0},  // SEMI
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,X,X,0,0,0,0}
  }, {  
    {0,0,0,0,0,0,0,0},  // LESS THAN
    {0,0,0,0,0,X,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,X,0,0,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,0,X,0,0}
  }, {  
    {0,0,0,0,0,0,0,0},  // EQUALS
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,X,X,X,X,X,0},
    {0,0,0,0,0,0,0,0},
    {0,0,X,X,X,X,X,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,0,0,0,0,0}
  }, {  
    {0,0,0,0,0,0,0,0},  // GREATER THAN
    {0,0,X,0,0,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,0,0,X,0,0},
    {0,0,0,0,X,0,0,0},
    {0,0,0,X,0,0,0,0},
    {0,0,X,0,0,0,0,0}
  }, {
    {0,0,X,X,X,X,0,0}, // QUESTION
    {0,X,X,0,0,X,X,0},
    {0,X,0,0,0,0,X,0},
    {0,0,0,0,0,X,X,0},
    {0,0,0,0,X,X,0,0},
    {0,0,0,0,0,0,0,0},
    {0,0,0,X,X,0,0,0},
    {0,0,0,X,X,0,0,0}
  }, {
    {0,0,X,X,X,X,0,0},  // AT
    {0,X,0,0,0,0,X,0},
    {X,0,0,X,X,0,0,X},
    {X,0,X,0,0,X,0,X},
    {X,0,X,0,0,X,X,0},
    {X,0,0,X,X,X,0,0},
    {0,X,0,0,0,0,X,0},
    {0,0,X,X,X,X,0,0}
  }
};

const int LBRACKET[8][8] = {  
  {0,0,0,0,X,X,X,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,X,X,0}
};

const int RBRACKET[8][8] = {  
  {0,X,X,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,X,X,X,0,0,0,0}
};

const int BACKSLASH[8][8] = {  
  {0,0,0,0,0,0,0,0},
  {0,X,0,0,0,0,0,0},
  {0,0,X,0,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,0,X,0,0},
  {0,0,0,0,0,0,X,0},
  {0,0,0,0,0,0,0,0}
};

const int CARET[8][8] = {  
  {0,0,0,X,0,0,0,0},
  {0,0,X,0,X,0,0,0},
  {0,X,0,0,0,X,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0}
};

const int UNDERSCORE[8][8] = {  
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {X,X,X,X,X,X,X,X}
};

const int BACKTICK[8][8] = {  
  {0,0,X,0,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0}
};

const int LCURLYB[8][8] = {  
  {0,0,0,0,0,X,X,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,X,X,0,0,0,0},
  {0,0,X,X,0,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,X,0,0,0},
  {0,0,0,0,0,X,X,0}
};

const int RCURLYB[8][8] = {  
  {0,X,X,0,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,0,X,X,0,0},
  {0,0,0,0,X,X,0,0},
  {0,0,0,X,0,0,0,0},
  {0,0,0,X,0,0,0,0},
  {0,X,X,0,0,0,0,0}
};

const int VLINE[8][8] = {  
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0},
  {0,0,0,X,X,0,0,0}
};

const int TILDE[8][8] = {  
  {0,0,0,0,0,0,0,0},
  {0,X,X,0,0,0,0,0},
  {X,0,0,X,0,0,X,0},
  {0,0,0,0,X,X,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0}
};
/*
{  
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0},
  {0,0,0,0,0,0,0,0}
}

*/
const int NIL_CHAR[8][8] ={{X,0,0,X,0,X,0,X},
                          {X,X,0,X,0,X,0,X},
                          {X,0,X,X,0,X,0,X},
                          {X,0,0,X,0,0,X,0},
                          {0,0,0,0,0,0,0,0},
                          {X,0,0,0,0,X,0,0},
                          {X,0,0,0,0,X,0,0},
                          {X,X,X,X,0,X,X,X}};

void fontmap_free(fontmap_t* fontmap) {
  free(fontmap->map);
  free(fontmap);
}

fontmap_t * fontmap_default() {
  fontmap_t * result = malloc(sizeof(fontmap_t));
  glyph_t * map = malloc(128 * sizeof(glyph_t));
  result->size = 128;
  result->map = map;

  int i;
  for(i = 0; i < 128; i++) {
    map[i].width = FONT_SIZE;
    map[i].height = FONT_SIZE;
    map[i].baseline_offset = 0;
    map[i].centerline_offset = 0;
    map[i].data = (int*) &NIL_CHAR;
  }

  // Uppercase
  for(i = 0; i < ALPHA_COUNT; i++) {
    map[65 + i].data = (int*) &ALPHA[i];
  }

  // Lowercase
  for(i = 0; i < ALPHA_COUNT; i++) {
    map[97 + i].data = (int*) &ALPHA[i];
  }

  // Numbers
  for(i = 0; i < NUMBERS_COUNT; i++) {
    map[48 + i].data = (int*) &NUMBERS[i];
  }
  
  // Symbols:

  for(i = 0; i < ASCIISYMB1_COUNT; i++) {
    map[32 + i].data = (int*) &ASCIISYMB1[i];
  }

  for(i = 0; i < ASCIISYMB2_COUNT; i++) {
    map[58 + i].data = (int*) &ASCIISYMB2[i];
  }

  map[91].data = (int*) &LBRACKET;
  map[92].data = (int*) &BACKSLASH;
  map[93].data = (int*) &RBRACKET;
  map[94].data = (int*) &CARET;
  map[95].data = (int*) &UNDERSCORE;
  map[96].data = (int*) &BACKTICK;
  map[123].data = (int*) &LCURLYB;
  map[124].data = (int*) &VLINE;
  map[125].data = (int*) &RCURLYB;
  map[126].data = (int*) &TILDE;

  return result;
}

void draw_glyph(int x, int y, glyph_t * glyph, context_t * context) {
  draw_array(x, y, glyph->width, glyph->height, glyph->data, context);
}

void draw_string(int x, int y, char * string, fontmap_t * fontmap, context_t * context) {
  int length = strlen(string);
  draw_rect(0, 0, length * fontmap->max_width + 2, fontmap->max_height + 4, context, 0x0);
  for(int i = 0; i < length; i++) {
    glyph_t * charPtr = &fontmap->map[(int) string[i]];
    if(charPtr == NULL) continue;
    draw_glyph(x + 9 * i, y + 1, charPtr, context);
  }
}
